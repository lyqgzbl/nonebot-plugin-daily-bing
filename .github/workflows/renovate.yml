name: ‚öôÔ∏è ‰æùËµñËá™Âä®Êõ¥Êñ∞ (Renovate Self-Hosted)

on:
  schedule:
    - cron: '0 0 * * MON' 
  workflow_dispatch: 

env:
  RENOVATE_PLATFORM: 'github'
  LOG_LEVEL: 'info' 

jobs:
  renovate:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    steps:
      - name: ‚¨áÔ∏è Checkout Repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.RENOVATE_TOKEN }}
          
      - name: üë§ Setup Git Identity
        run: |
          git config --global user.email "renovate[bot]@users.noreply.github.com"
          git config --global user.name "Renovate Bot"

      - name: üöÄ Run Renovate Self-Hosted
        uses: docker://renovate/renovate:latest
        env:
          RENOVATE_TOKEN: ${{ secrets.RENOVATE_TOKEN }}
          RENOVATE_PLATFORM: ${{ env.RENOVATE_PLATFORM }}
          LOG_LEVEL: ${{ env.LOG_LEVEL }}
          RENOVATE_REPOSITORIES: ${{ github.repository }}
        with:
          args: --allowed-commands '["^(pip install uv)$", "^(uv lock)$"]'